{% extends 'base.html' %}
{% block title %}Mumble Radio{% endblock %}
{% block content %}

<script type="text/javascript">

function startQueue() {
	$.get('/radio/start');
}

function stopQueue() {
	$.get('/radio/stop');
}

function addToQueue() {
	var user_title = $("#userTitle").val();
	var video_id = $("#videoId").val();
	$.ajax({
		'url': '/radio/queue',
		'data': {
			'user_title': user_title,
			'video_id': video_id
		},
		'success': function() {
			alert("Your song has been added to the queue.");
		},
		'dataType': 'json' 
	})
}

</script>

<h1>Morlunk Mumble Radio Alpha</h1>
{% if user.is_staff %}
<h3>Admin Controls</h3>
<button onclick="startQueue()">Play</button><button onclick="stopQueue()">Stop</button>
{% endif %}
<h3>Queued Items</h3>
<ol>
	{% for item in queue %}
	<li><a href="http://www.youtube.com/watch?v={{ item.video_id }}">{{ item.user_title }}</a></li>
	{% endfor %}
</ol>

<h3>Add Item</h3>
<b>Video Title:</b><br>
<input type="text" id="userTitle"/><br><br>
<b>Youtube Video ID:</b><br>
<input type="text" id="videoId"/><br><br>
<button onclick="addToQueue()">Submit</button>

{% endblock %}